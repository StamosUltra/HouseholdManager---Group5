<script src="js/Chart.min.js"></script>
<div class="container-fluid">
    <div class="row content">
        <div class="col-md-12 widgetCol">
            <div class="panel panel-default widget">
                <div class="panel-heading">
                    <span>Statistics <p id="choreStatId" class="pull-right" style="margin-right: 1em;"> CHORES </p> <p id="moneyStatId" class="pull-right" style="margin-right: 2em"> EXPENSES</p> </span>
                </div>
                <div class="panel-body scrollWhenFull STAT">
                    <canvas id="myChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var canvas = document.getElementById('myChart');
    fitToContainer(canvas);

    function fitToContainer(canvas){
        // Make it visually fill the positioned parent
        canvas.style.width ='100%';
        canvas.style.height='100%';
        // ...then set the internal size to match
        canvas.width  = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
    }

    var months = ["January", "February", "March", "April", "May", "June", "July"];
    var values = [0, 10, 5, 2, 20, 30, 45];
    var values2 = [3, 30, 1, 3, 7, 21, 15];
    var valueArray = [values, values2];


    var userStats = [{
        name: 'Trym',
        months: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
        tasks: [1, 4, 6, 0, 1],
    }, {
        name: 'Magnus',
        months: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
        tasks: [5, 2, 1, 9, 4],
    }];

    function showExpenseStats(xAxis, yAxis) {
        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'line',
            // The data for our dataset
            data: {
                labels: xAxis,
                datasets: [{
                    label: 'Money Spent Per Month',
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: yAxis,

                    //no curves when 0
                    lineTension: 0,

                }]
            },

            // Configuration options go here
            options: {
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Money Spent'
                        }
                    }],
                    xAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Month'
                        }
                    }],
                }
            }
        });
    }

    function showChoreStats(x_axis, y_axis) {

        var sets = [];
        for (i = 0; i < y_axis.length; i++) {
            var newSet = {
                label: y_axis[i].name,
                backgroundColor: 'rgba(0,0,0,0)',
                borderColor: '#'+Math.floor(Math.random()*16777215).toString(16),
                data: y_axis[i].tasks,

                lineTension: 0
            }

            sets.push(newSet);
        }

        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'line',

            // The data for our dataset
            data: {
                labels: x_axis,
                datasets: sets
            },

            // Configuration options go here
            options: {
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Chores Done'
                        }
                    }],
                    xAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: 'Month'
                        }
                    }],
                }
            }
        });
    }

    showExpenseStats(months, values);

    $("#moneyStatId").click(function () {
        showExpenseStats(months, values)
    });

    $("#choreStatId").click(function () {
        showChoreStats(userStats[0].months, userStats)
    });
</script>